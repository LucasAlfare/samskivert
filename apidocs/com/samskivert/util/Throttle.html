<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Thu Mar 12 08:40:14 PDT 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Throttle (samskivert 1.9 API)</title>
<meta name="date" content="2015-03-12">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Throttle (samskivert 1.9 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Throttle.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/samskivert/util/TerseLogFormatter.html" title="class in com.samskivert.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/samskivert/util/Triple.html" title="class in com.samskivert.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/samskivert/util/Throttle.html" target="_top">Frames</a></li>
<li><a href="Throttle.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.samskivert.util</div>
<h2 title="Class Throttle" class="title">Class Throttle</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.samskivert.util.Throttle</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">Throttle</span>
extends <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A throttle is used to prevent code from attempting a particular operation too often. Often it is
 desirable to retry an operation under failure conditions, but simplistic approaches to retrying
 operations can lead to large numbers of spurious attempts to do something that will obviously
 fail. The throttle class provides a mechanism for limiting such attempts by measuring whether or
 not an activity has been performed N times in the last M seconds. The user of the class decides
 the appropriate throttle parameters and then simply calls through to throttle to determine
 whether or not to go ahead with the operation.

 <p> For example:

 <pre>
 protected Throttle _throttle = new Throttle(5, 60000L);

 public void performOp ()
     throws UnavailableException
 {
     if (_throttle.throttleOp()) {
         throw new UnavailableException();
     }

     // perform operation
 }
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/samskivert/util/Throttle.html#Throttle-int-long-">Throttle</a></span>(int&nbsp;operations,
        long&nbsp;period)</code>
<div class="block">Constructs a new throttle instance that will allow the specified number of operations to
 proceed within the specified period (the period is measured in milliseconds).</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/samskivert/util/Throttle.html#getLatestOperation--">getLatestOperation</a></span>()</code>
<div class="block">Returns the timestamp of the most recently recorded operation.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/samskivert/util/Throttle.html#main-java.lang.String:A-">main</a></span>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)</code>
<div class="block">Used for testing.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/samskivert/util/Throttle.html#noteOp-long-">noteOp</a></span>(long&nbsp;timeStamp)</code>
<div class="block">Note that an operation occurred at the specified timestamp.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/samskivert/util/Throttle.html#reinit-int-long-">reinit</a></span>(int&nbsp;operations,
      long&nbsp;period)</code>
<div class="block">Updates the number of operations for this throttle to a new maximum, retaining the current
 history of operations if the limit is being increased and truncating the oldest operations
 if the limit is decreased.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/samskivert/util/Throttle.html#throttleOp--">throttleOp</a></span>()</code>
<div class="block">Registers an attempt at an operation and returns true if the operation should be throttled
 (meaning N operations have already been performed in the last M seconds), or false if the
 operation is allowed to be performed.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/samskivert/util/Throttle.html#throttleOp-long-">throttleOp</a></span>(long&nbsp;timeStamp)</code>
<div class="block">Registers an attempt at an operation and returns true if the operation should be performed
 or false if it should be throttled (meaning N operations have already been performed in the
 last M seconds).</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/samskivert/util/Throttle.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/samskivert/util/Throttle.html#wouldThrottle-long-">wouldThrottle</a></span>(long&nbsp;timeStamp)</code>
<div class="block">Check to see if we would throttle an operation occuring at the specified timestamp.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Throttle-int-long-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Throttle</h4>
<pre>public&nbsp;Throttle(int&nbsp;operations,
                long&nbsp;period)</pre>
<div class="block">Constructs a new throttle instance that will allow the specified number of operations to
 proceed within the specified period (the period is measured in milliseconds).

 <p> As operations and period define a ratio, use the smallest value possible for
 <code>operations</code> as an array is created to track the time at which each operation was
 performed (e.g. use 6 ops per 10 seconds rather than 60 ops per 100 seconds if
 possible). However, note that you may not always want to reduce the ratio as much as
 possible if you wish to allow bursts of operations up to some large value.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="reinit-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reinit</h4>
<pre>public&nbsp;void&nbsp;reinit(int&nbsp;operations,
                   long&nbsp;period)</pre>
<div class="block">Updates the number of operations for this throttle to a new maximum, retaining the current
 history of operations if the limit is being increased and truncating the oldest operations
 if the limit is decreased.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>operations</code> - the new maximum number of operations.</dd>
<dd><code>period</code> - the new period.</dd>
</dl>
</li>
</ul>
<a name="throttleOp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>throttleOp</h4>
<pre>public&nbsp;boolean&nbsp;throttleOp()</pre>
<div class="block">Registers an attempt at an operation and returns true if the operation should be throttled
 (meaning N operations have already been performed in the last M seconds), or false if the
 operation is allowed to be performed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the throttle is activated, false if the operation can proceed.</dd>
</dl>
</li>
</ul>
<a name="throttleOp-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>throttleOp</h4>
<pre>public&nbsp;boolean&nbsp;throttleOp(long&nbsp;timeStamp)</pre>
<div class="block">Registers an attempt at an operation and returns true if the operation should be performed
 or false if it should be throttled (meaning N operations have already been performed in the
 last M seconds). For systems that don't wish to use <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/System.html?is-external=true#currentTimeMillis--" title="class or interface in java.lang"><code>System.currentTimeMillis()</code></a> (opting
 in favor for some custom timing mechanism that is more accurate that <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/System.html?is-external=true#currentTimeMillis--" title="class or interface in java.lang"><code>System.currentTimeMillis()</code></a>) or those that already have the time, they can avoid an
 unnecessary call to <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/System.html?is-external=true#currentTimeMillis--" title="class or interface in java.lang"><code>System.currentTimeMillis()</code></a> by using this version of the method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeStamp</code> - the timestamp at which this operation is being attempted.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the throttle is activated, false if the operation can proceed.</dd>
</dl>
</li>
</ul>
<a name="wouldThrottle-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wouldThrottle</h4>
<pre>public&nbsp;boolean&nbsp;wouldThrottle(long&nbsp;timeStamp)</pre>
<div class="block">Check to see if we would throttle an operation occuring at the specified timestamp.
 Typically used in conjunction with <a href="../../../com/samskivert/util/Throttle.html#noteOp-long-"><code>noteOp(long)</code></a>.</div>
</li>
</ul>
<a name="noteOp-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>noteOp</h4>
<pre>public&nbsp;void&nbsp;noteOp(long&nbsp;timeStamp)</pre>
<div class="block">Note that an operation occurred at the specified timestamp. This method should be used with
 <a href="../../../com/samskivert/util/Throttle.html#wouldThrottle-long-"><code>wouldThrottle(long)</code></a> to note an operation that has already been cleared to
 occur. Typically this is used if there is another limiting factor besides the throttle that
 determines whether the operation can occur. You are responsible for calling this method in a
 safe and timely manner after using wouldThrottle.</div>
</li>
</ul>
<a name="getLatestOperation--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLatestOperation</h4>
<pre>public&nbsp;long&nbsp;getLatestOperation()</pre>
<div class="block">Returns the timestamp of the most recently recorded operation.</div>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)</pre>
<div class="block">Used for testing.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Throttle.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/samskivert/util/TerseLogFormatter.html" title="class in com.samskivert.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/samskivert/util/Triple.html" title="class in com.samskivert.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/samskivert/util/Throttle.html" target="_top">Frames</a></li>
<li><a href="Throttle.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2015. All rights reserved.</small></p>
</body>
</html>
