<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Thu Mar 12 08:40:10 PDT 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>UserRepository (samskivert 1.9 API)</title>
<meta name="date" content="2015-03-12">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="UserRepository (samskivert 1.9 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UserRepository.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/samskivert/servlet/user/Username.html" title="class in com.samskivert.servlet.user"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/samskivert/servlet/user/UserUtil.html" title="class in com.samskivert.servlet.user"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/samskivert/servlet/user/UserRepository.html" target="_top">Frames</a></li>
<li><a href="UserRepository.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.com.samskivert.jdbc.SimpleRepository">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.samskivert.servlet.user</div>
<h2 title="Class UserRepository" class="title">Class UserRepository</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../com/samskivert/jdbc/Repository.html" title="class in com.samskivert.jdbc">com.samskivert.jdbc.Repository</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../com/samskivert/jdbc/SimpleRepository.html" title="class in com.samskivert.jdbc">com.samskivert.jdbc.SimpleRepository</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../com/samskivert/jdbc/JORARepository.html" title="class in com.samskivert.jdbc">com.samskivert.jdbc.JORARepository</a></li>
<li>
<ul class="inheritance">
<li>com.samskivert.servlet.user.UserRepository</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">UserRepository</span>
extends <a href="../../../../com/samskivert/jdbc/JORARepository.html" title="class in com.samskivert.jdbc">JORARepository</a></pre>
<div class="block">Interfaces with the RDBMS in which the user information is stored. The user repository
 encapsulates the creating, loading and management of users and sessions.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.com.samskivert.jdbc.SimpleRepository">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;com.samskivert.jdbc.<a href="../../../../com/samskivert/jdbc/SimpleRepository.html" title="class in com.samskivert.jdbc">SimpleRepository</a></h3>
<code><a href="../../../../com/samskivert/jdbc/SimpleRepository.PreCondition.html" title="interface in com.samskivert.jdbc">SimpleRepository.PreCondition</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.com.samskivert.jdbc.Repository">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;com.samskivert.jdbc.<a href="../../../../com/samskivert/jdbc/Repository.html" title="class in com.samskivert.jdbc">Repository</a></h3>
<code><a href="../../../../com/samskivert/jdbc/Repository.Operation.html" title="interface in com.samskivert.jdbc">Repository.Operation</a>&lt;<a href="../../../../com/samskivert/jdbc/Repository.Operation.html" title="type parameter in Repository.Operation">V</a>&gt;</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#USER_REPOSITORY_IDENT">USER_REPOSITORY_IDENT</a></span></code>
<div class="block">The database identifier used to obtain a connection from our connection provider.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#UserRepository-com.samskivert.jdbc.ConnectionProvider-">UserRepository</a></span>(<a href="../../../../com/samskivert/jdbc/ConnectionProvider.html" title="interface in com.samskivert.jdbc">ConnectionProvider</a>&nbsp;provider)</code>
<div class="block">Creates the repository and opens the user database.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#createUser-com.samskivert.servlet.user.Username-com.samskivert.servlet.user.Password-java.lang.String-java.lang.String-int-">createUser</a></span>(<a href="../../../../com/samskivert/servlet/user/Username.html" title="class in com.samskivert.servlet.user">Username</a>&nbsp;username,
          <a href="../../../../com/samskivert/servlet/user/Password.html" title="class in com.samskivert.servlet.user">Password</a>&nbsp;password,
          <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;realname,
          <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;email,
          int&nbsp;siteId)</code>
<div class="block">Requests that a new user be created in the repository.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#deleteUser-com.samskivert.servlet.user.User-">deleteUser</a></span>(<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&nbsp;user)</code>
<div class="block">'Delete' the users account such that they can no longer access it, however we do not delete
 the record from the db.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#loadAllRealNames--">loadAllRealNames</a></span>()</code>
<div class="block">Returns an array with the real names of every user in the system.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#loadRealNames-int:A-">loadRealNames</a></span>(int[]&nbsp;userIds)</code>
<div class="block">Loads the real names of the users identified by the supplied user ids and returns them in an
 array.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#loadUser-int-">loadUser</a></span>(int&nbsp;userId)</code>
<div class="block">Looks up a user by userid.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#loadUser-java.lang.String-">loadUser</a></span>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;username)</code>
<div class="block">Looks up a user by username.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#loadUserBySession-java.lang.String-">loadUserBySession</a></span>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;sessionKey)</code>
<div class="block">Looks up a user by a session identifier.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#loadUserNames-int:A-">loadUserNames</a></span>(int[]&nbsp;userIds)</code>
<div class="block">Loads the usernames of the users identified by the supplied user ids and returns them in an
 array.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../../com/samskivert/util/HashIntMap.html" title="class in com.samskivert.util">HashIntMap</a>&lt;<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#loadUsersFromId-int:A-">loadUsersFromId</a></span>(int[]&nbsp;userIds)</code>
<div class="block">Looks up users by userid</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#lookupUsersByEmail-java.lang.String-">lookupUsersByEmail</a></span>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;email)</code>
<div class="block">Lookup a user by email address, something that is not efficient and should really only be
 done by site admins attempting to look up a user record.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#lookupUsersWhere-java.lang.String-">lookupUsersWhere</a></span>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;where)</code>
<div class="block">Looks up a list of users that match an arbitrary query.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#pruneSessions--">pruneSessions</a></span>()</code>
<div class="block">Prunes any expired sessions from the sessions table.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#refreshSession-java.lang.String-int-">refreshSession</a></span>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;sessionKey,
              int&nbsp;expireDays)</code>
<div class="block">Validates that the supplied session key is still valid and if so, refreshes it for the
 specified number of days.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#registerSession-com.samskivert.servlet.user.User-int-">registerSession</a></span>(<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&nbsp;user,
               int&nbsp;expireDays)</code>
<div class="block">Creates a new session for the specified user and returns the randomly generated session
 identifier for that session.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/samskivert/servlet/user/UserRepository.html#updateUser-com.samskivert.servlet.user.User-">updateUser</a></span>(<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&nbsp;user)</code>
<div class="block">Updates a user that was previously fetched from the repository.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.samskivert.jdbc.SimpleRepository">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.samskivert.jdbc.<a href="../../../../com/samskivert/jdbc/SimpleRepository.html" title="class in com.samskivert.jdbc">SimpleRepository</a></h3>
<code><a href="../../../../com/samskivert/jdbc/SimpleRepository.html#setExecutePreCondition-com.samskivert.jdbc.SimpleRepository.PreCondition-">setExecutePreCondition</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="USER_REPOSITORY_IDENT">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>USER_REPOSITORY_IDENT</h4>
<pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> USER_REPOSITORY_IDENT</pre>
<div class="block">The database identifier used to obtain a connection from our connection provider. The value
 is <code>userdb</code> which you'll probably need to know to provide the proper
 configuration to your connection provider.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.samskivert.servlet.user.UserRepository.USER_REPOSITORY_IDENT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="UserRepository-com.samskivert.jdbc.ConnectionProvider-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UserRepository</h4>
<pre>public&nbsp;UserRepository(<a href="../../../../com/samskivert/jdbc/ConnectionProvider.html" title="interface in com.samskivert.jdbc">ConnectionProvider</a>&nbsp;provider)</pre>
<div class="block">Creates the repository and opens the user database. The database identifier used to fetch
 our database connection is documented by <a href="../../../../com/samskivert/servlet/user/UserRepository.html#USER_REPOSITORY_IDENT"><code>USER_REPOSITORY_IDENT</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>provider</code> - the database connection provider.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="createUser-com.samskivert.servlet.user.Username-com.samskivert.servlet.user.Password-java.lang.String-java.lang.String-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createUser</h4>
<pre>public&nbsp;int&nbsp;createUser(<a href="../../../../com/samskivert/servlet/user/Username.html" title="class in com.samskivert.servlet.user">Username</a>&nbsp;username,
                      <a href="../../../../com/samskivert/servlet/user/Password.html" title="class in com.samskivert.servlet.user">Password</a>&nbsp;password,
                      <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;realname,
                      <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;email,
                      int&nbsp;siteId)
               throws <a href="../../../../com/samskivert/servlet/user/UserExistsException.html" title="class in com.samskivert.servlet.user">UserExistsException</a>,
                      <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Requests that a new user be created in the repository.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>username</code> - the username of the new user to create.</dd>
<dd><code>password</code> - the password for the new user.</dd>
<dd><code>realname</code> - the user's real name.</dd>
<dd><code>email</code> - the user's email address.</dd>
<dd><code>siteId</code> - the unique identifier of the site through which this account is being
 created. The resulting user will be tracked as originating from this site for accounting
 purposes (<a href="../../../../com/samskivert/servlet/SiteIdentifier.html#DEFAULT_SITE_ID"><code>SiteIdentifier.DEFAULT_SITE_ID</code></a> can be used by systems that don't desire to
 perform site tracking.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The userid of the newly created user.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/servlet/user/UserExistsException.html" title="class in com.samskivert.servlet.user">UserExistsException</a></code></dd>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="loadUser-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadUser</h4>
<pre>public&nbsp;<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&nbsp;loadUser(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;username)
              throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Looks up a user by username.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the user with the specified user id or null if no user with that id exists.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="loadUser-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadUser</h4>
<pre>public&nbsp;<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&nbsp;loadUser(int&nbsp;userId)
              throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Looks up a user by userid.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the user with the specified user id or null if no user with that id exists.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="loadUserBySession-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadUserBySession</h4>
<pre>public&nbsp;<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&nbsp;loadUserBySession(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;sessionKey)
                       throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Looks up a user by a session identifier.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the user associated with the specified session or null of no session exists with the
 supplied identifier.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="loadUsersFromId-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadUsersFromId</h4>
<pre>public&nbsp;<a href="../../../../com/samskivert/util/HashIntMap.html" title="class in com.samskivert.util">HashIntMap</a>&lt;<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&gt;&nbsp;loadUsersFromId(int[]&nbsp;userIds)
                                 throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Looks up users by userid</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the users whom have a user id in the userIds array.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="lookupUsersByEmail-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lookupUsersByEmail</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&gt;&nbsp;lookupUsersByEmail(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;email)
                                   throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Lookup a user by email address, something that is not efficient and should really only be
 done by site admins attempting to look up a user record.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the user with the specified user id or null if no user with that id exists.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="lookupUsersWhere-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lookupUsersWhere</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&gt;&nbsp;lookupUsersWhere(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;where)
                                 throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Looks up a list of users that match an arbitrary query. Care should be taken in constructing
 these queries as the user table is likely to be large and a query that does not make use of
 indices could be very slow.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the users matching the specified query or an empty list if there are no matches.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="updateUser-com.samskivert.servlet.user.User-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateUser</h4>
<pre>public&nbsp;boolean&nbsp;updateUser(<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&nbsp;user)
                   throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Updates a user that was previously fetched from the repository.  Only fields that have been
 modified since it was loaded will be written to the database and those fields will
 subsequently be marked clean once again.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the record was updated, false if the update was skipped because no fields in
 the user record were modified.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="deleteUser-com.samskivert.servlet.user.User-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteUser</h4>
<pre>public&nbsp;void&nbsp;deleteUser(<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&nbsp;user)
                throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">'Delete' the users account such that they can no longer access it, however we do not delete
 the record from the db.  The name is changed such that the original name has XX=FOO if the
 name were FOO originally.  If we have to lop off any of the name to get our prefix to fit we
 use a minus sign instead of a equals side.  The password field is set to be the empty string
 so that no one can log in (since nothing hashes to the empty string.  We also make sure
 their email address no longer works, so in case we don't ignore 'deleted' users when we do
 the sql to get emailaddresses for the mass mailings we still won't spam delete folk.  We
 leave the emailaddress intact exect for the @ sign which gets turned to a #, so that we can
 see what their email was incase it was an accidently deletion and we have to verify through
 email.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="registerSession-com.samskivert.servlet.user.User-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerSession</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;registerSession(<a href="../../../../com/samskivert/servlet/user/User.html" title="class in com.samskivert.servlet.user">User</a>&nbsp;user,
                              int&nbsp;expireDays)
                       throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Creates a new session for the specified user and returns the randomly generated session
 identifier for that session. If a session entry already exists for the specified user it
 will be reused.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>expireDays</code> - the number of days in which the session token should expire.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="refreshSession-java.lang.String-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refreshSession</h4>
<pre>public&nbsp;boolean&nbsp;refreshSession(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;sessionKey,
                              int&nbsp;expireDays)
                       throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Validates that the supplied session key is still valid and if so, refreshes it for the
 specified number of days.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the session was located and refreshed, false if it no longer exists.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="pruneSessions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pruneSessions</h4>
<pre>public&nbsp;void&nbsp;pruneSessions()
                   throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Prunes any expired sessions from the sessions table.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="loadUserNames-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadUserNames</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;loadUserNames(int[]&nbsp;userIds)
                       throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Loads the usernames of the users identified by the supplied user ids and returns them in an
 array. If any users do not exist, their slot in the array will contain a null.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="loadRealNames-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadRealNames</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;loadRealNames(int[]&nbsp;userIds)
                       throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Loads the real names of the users identified by the supplied user ids and returns them in an
 array. If any users do not exist, their slot in the array will contain a null.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a name="loadAllRealNames--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>loadAllRealNames</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;loadAllRealNames()
                          throws <a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></pre>
<div class="block">Returns an array with the real names of every user in the system.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../com/samskivert/io/PersistenceException.html" title="class in com.samskivert.io">PersistenceException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UserRepository.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/samskivert/servlet/user/Username.html" title="class in com.samskivert.servlet.user"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/samskivert/servlet/user/UserUtil.html" title="class in com.samskivert.servlet.user"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/samskivert/servlet/user/UserRepository.html" target="_top">Frames</a></li>
<li><a href="UserRepository.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.com.samskivert.jdbc.SimpleRepository">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2015. All rights reserved.</small></p>
</body>
</html>
